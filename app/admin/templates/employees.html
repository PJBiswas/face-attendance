<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Employees</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:24px}
    .banner{padding:8px 12px;border-radius:6px;margin:10px 0;display:inline-block}
    .ok{background:#eaffea;border:1px solid #86d486}
    .err{background:#ffeaea;border:1px solid #e39b9b}
    form{margin:12px 0}
    input,button{padding:8px;margin:4px}
    table{border-collapse:collapse;width:100%;margin-top:16px}
    th,td{border:1px solid #ddd;padding:8px}
    th{background:#f5f5f5}
  </style>
</head>
<body>
  <h2>Employees</h2>

  {% if request.query_params.get('ok') %}
    <div class="banner ok">Employee saved.</div>
  {% endif %}
  {% if request.query_params.get('error') == 'exists' %}
    <div class="banner err">emp_code already exists.</div>
  {% endif %}

  <form action="/admin/employees/new" method="post" enctype="multipart/form-data">
    <input name="emp_code" placeholder="Emp Code" required>
    <input name="full_name" placeholder="Full name" required>
    <input name="department" placeholder="Department">
    <input name="designation" placeholder="Designation">
    <input name="email" placeholder="Email">
    <input name="joining_date" placeholder="YYYY-MM-DD">
    <input name="notes" placeholder="Notes">
    <input type="file" name="photo" accept="image/*">
    <button type="submit">Add</button>
  </form>

  <table>
    <tr>
      <th>ID</th><th>Code</th><th>Name</th><th>Dept</th>
      <th>Designation</th><th>Email</th><th>Joining</th><th>Photo</th>
    </tr>
    {% for e in employees %}
      <tr>
        <td>{{ e.id }}</td>
        <td>{{ e.emp_code }}</td>
        <td>{{ e.full_name }}</td>
        <td>{{ e.department or "" }}</td>
        <td>{{ e.designation or "" }}</td>
        <td>{{ e.email or "" }}</td>
        <td>{{ e.joining_date or "" }}</td>
        <td>{% if e.photo_path %}<small>{{ e.photo_path }}</small>{% endif %}</td>
      </tr>
    {% endfor %}
  </table>
</body>
</html>
